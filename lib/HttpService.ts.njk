import axios from 'axios';
import { RequestObject } from '../services/interfaces/RequestObject';

export default class HttpService {
  public baseUrl: string = 'change me';
  /**
   * Injects the values into a path
   * @param {Object} params
   * @param {String} path
   */
  private static injectParamsToPath (params: object = {}, path: string) {
    Object.keys(params).forEach((param) => {
      path = path.replace(':' + param, params[param]);
    });
    return path;
  }

  /**
   * Make the http requestPromise
   * @param {RequestObject} requestObject
   */
  public async sendRequest (requestObject: RequestObject): Promise<any> {
    const URL = this.baseUrl + HttpService.injectParamsToPath(requestObject.params, requestObject.path);
    return axios({
      headers: requestObject.headers,
      method: requestObject.method,
      data: requestObject.formData || requestObject.body || {},
      params: requestObject.qs || {},
      url: URL,
    });
  }
}
